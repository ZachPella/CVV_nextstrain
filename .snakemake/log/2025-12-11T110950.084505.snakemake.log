Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 14
Rules claiming more threads will be scaled down.
Job stats:
job                count    min threads    max threads
---------------  -------  -------------  -------------
align                  1              1              1
all                    1              1              1
ancestral              1              1              1
export                 1              1              1
filter                 1              1              1
index_sequences        1              1              1
refine                 1              1              1
traits                 1              1              1
tree                   1             14             14
total                  9              1             14

Select jobs to execute...

[Thu Dec 11 11:09:50 2025]
Job 6: 
        Creating an index of sequence composition for filtering.
        
Reason: Updated input files: data/sequences.fasta

[Thu Dec 11 11:09:52 2025]
Finished job 6.
1 of 9 steps (11%) done
Select jobs to execute...

[Thu Dec 11 11:09:52 2025]
Job 5: 
        Filtering to
          - 10 sequence(s) per country year
          - from 1950 onwards
        
Reason: Input files updated by another job: results/sequence_index.tsv

[Thu Dec 11 11:09:53 2025]
Finished job 5.
2 of 9 steps (22%) done
Select jobs to execute...

[Thu Dec 11 11:09:53 2025]
Job 4: 
        Aligning sequences to config/reference.fasta
          - filling gaps with N
        
Reason: Input files updated by another job: results/filtered.fasta

[Thu Dec 11 11:09:54 2025]
Finished job 4.
3 of 9 steps (33%) done
Select jobs to execute...

[Thu Dec 11 11:09:54 2025]
Job 3: Building tree
Reason: Input files updated by another job: results/aligned.fasta

[Thu Dec 11 11:12:04 2025]
Finished job 3.
4 of 9 steps (44%) done
Select jobs to execute...

[Thu Dec 11 11:12:04 2025]
Job 2: 
        Refining tree
          - estimate timetree
          - use opt coalescent timescale
          - estimate marginal node dates
          - filter tips more than 4 IQDs from clock expectation
        
Reason: Input files updated by another job: results/tree_raw.nwk, results/aligned.fasta

[Thu Dec 11 11:12:05 2025]
Error in rule refine:
    jobid: 2
    output: results/tree.nwk, results/branch_lengths.json
    shell:
        
        augur refine             --tree results/tree_raw.nwk             --alignment results/aligned.fasta             --metadata data/metadata.tsv             --output-tree results/tree.nwk             --output-node-data results/branch_lengths.json             --timetree             --coalescent opt             --date-confidence             --date-inference marginal             --clock-filter-iqd 4             --root NC_043618.1
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2025-12-11T110950.084505.snakemake.log
